import {
  _ as C,
  v as P,
  r as I,
  o as r,
  c,
  a as t,
  t as n,
  b as u,
  F as h,
  d as m,
  e as x,
  w as f,
  f as v,
  n as _,
  g as w,
  h as y,
  i as D,
  j as g,
  k as E,
  l as U,
} from "./plugin-vue_export-helper.min.js";
import { N as M } from "./notyf.es.min.js";
const j = {
    name: "Dashboard",
    components: { VueEditor: P.exports.VueEditor },
    data() {
      const s = window.WPIT_Admin.WPIT_trans;
      return {
        loading: !1,
        loadingDetails: !1,
        skeletonRows: 5,
        priorities: [],
        tickets: [],
        totalTicket: 0,
        ticketsNew: 0,
        ticketsWaiting: 0,
        ticketsResolved: 0,
        ticketsInProgress: 0,
        ticketsClosed: 0,
        newTicket: {
          title: "",
          content: "",
          priority: null,
          asigned: null,
          file: null,
        },
        errors: { title: !1, content: !1, priority: !1 },
        teamUsers: [],
        activeTicket: null,
        showAdditionalInfo: !1,
        details: [],
        comments: [],
        newComment: "",
        showConfirmationModal: !1,
        ticketIdToUpdate: null,
        statusToConfirm: "",
        currentPage: 1,
        perPage: 10,
        perPageOptions: [5, 10, 20, 50],
        totalPages: 1,
        paginationButtons: [],
        statusOptions: [
          { value: "new", label: s.new, colorClass: "bg-blue-500 text-white" },
          {
            value: "in_progress",
            label: s.in_progress,
            colorClass: "bg-yellow-500 text-white",
          },
          {
            value: "waiting",
            label: s.waiting,
            colorClass: "bg-orange-500 text-white",
          },
          {
            value: "resolved",
            label: s.resolved,
            colorClass: "bg-green-500 text-white",
          },
          {
            value: "closed",
            label: s.closed,
            colorClass: "bg-gray-500 text-white",
          },
        ],
        selectedStatusLabel: "",
        toolbarOptions: [
          ["bold", "italic", "underline", "strike"],
          ["link"],
          [{ list: "ordered" }, { list: "bullet" }],
          [{ header: [1, 2, 3, 4, 5, 6, !1] }],
          [{ color: [] }, { background: [] }],
          [{ align: [] }],
          [{ align: "right" }, { align: "center" }, { align: "justify" }],
          ["clean"],
          ["html"],
        ],
      };
    },
    mounted() {
      this.fetchPriorities(),
        this.fetchTickets(),
        this.initializeNotyf(),
        this.fetchTeamUsers();
    },
    watch: {
      currentPage() {
        this.generatePaginationButtons();
      },
      totalPages() {
        this.generatePaginationButtons();
      },
    },
    computed: {
      translations() {
        return window.WPIT_Admin.WPIT_trans;
      },
      statusLabel() {
        const s = this.statusOptions.find(
          (e) => e.value === this.details.status
        );
        return s ? s.label : this.details.status;
      },
      formattedTicketInfo() {
        if (!this.details || !this.details.ticket_info) return [];
        try {
          const s = JSON.parse(this.details.ticket_info),
            e = (a) => /^(https?:\/\/[^\s$.?#].[^\s]*)$/i.test(a);
          return [
            {
              title: this.translations.page_url,
              value: s.url || this.translations.no_info_available,
              isUrl: e(s.url),
            },
            {
              title: this.translations.page_title,
              value: s.title || this.translations.no_info_available,
              isUrl: !1,
            },
            {
              title: this.translations.user_agent,
              value: s.userAgent || this.translations.no_info_available,
              isUrl: !1,
            },
            {
              title: this.translations.browser_language,
              value: s.browserLanguage || this.translations.no_info_available,
              isUrl: !1,
            },
            {
              title: this.translations.platform,
              value: s.platform || this.translations.no_info_available,
              isUrl: !1,
            },
            {
              title: this.translations.screen_resolution,
              value: s.screenResolution || this.translations.no_info_available,
              isUrl: !1,
            },
            {
              title: this.translations.viewport_size,
              value: s.viewportSize || this.translations.no_info_available,
              isUrl: !1,
            },
            {
              title: this.translations.referrer,
              value: s.referrer || this.translations.no_referrer,
              isUrl: e(s.referrer),
            },
          ];
        } catch (s) {
          return console.error("Error parsing ticket info JSON: ", s), [];
        }
      },
    },
    methods: {
      toggleAdditionalInfo() {
        this.showAdditionalInfo = !this.showAdditionalInfo;
      },
      getStatusLabel(s) {
        const e = this.statusOptions.find((a) => a.value === s);
        return e || { label: s, colorClass: "bg-gray-300 text-black" };
      },
      initializeNotyf() {
        this.notyf = new M({
          duration: 3e3,
          position: { x: "right", y: "bottom" },
        });
      },
      fetchTickets(s = 1) {
        (this.loading = !0),
          fetch(
            `/wp-json/wbugboard/v1/tickets?page=${s}&per_page=${this.perPage}`
          )
            .then((e) => e.json())
            .then((e) => {
              (this.tickets = e.tickets),
                (this.totalTicket = e.total_tickets),
                (this.ticketsNew = e.status_counts.new),
                (this.ticketsWaiting = e.status_counts.waiting),
                (this.ticketsInProgress = e.status_counts.in_progress),
                (this.ticketsResolved = e.status_counts.resolved),
                (this.ticketsClosed = e.status_counts.closed),
                (this.totalPages = e.total_pages),
                (this.currentPage = s),
                (this.loading = !1);
            })
            .catch((e) => {
              console.error(
                "Erreur lors de la r\xE9cup\xE9ration des priorit\xE9s:",
                e
              ),
                this.notyf.error(
                  `Erreur lors de la r\xE9cup\xE9ration des tickets: ${e}`
                ),
                (this.loading = !1);
            });
      },
      fetchTeamUsers() {
        fetch("/wp-json/wbugboard/v1/team", {
          method: "GET",
          headers: { "X-WP-Nonce": WPIT_Admin.nonce },
        })
          .then((s) => {
            if (!s.ok) throw new Error("Erreur HTTP");
            return s.json();
          })
          .then((s) => {
            this.teamUsers = s;
          })
          .catch((s) => {
            console.error(
              "Erreur lors de la r\xE9cup\xE9ration des utilisateurs:",
              s
            );
          });
      },
      perPageChanged() {
        this.fetchTickets(1);
      },
      generatePaginationButtons() {
        const s = [];
        if (this.totalPages <= 10)
          for (let a = 1; a <= this.totalPages; a++) s.push(a);
        else {
          let a = Math.max(1, this.currentPage - 2),
            d = Math.min(this.totalPages, this.currentPage + 2);
          this.currentPage <= 3
            ? (d = 10)
            : this.currentPage >= this.totalPages - 2 &&
              (a = this.totalPages - 10 + 1);
          for (let o = a; o <= d; o++) s.push(o);
        }
        this.paginationButtons = s;
      },
      goToPage(s) {
        s >= 1 && s <= this.totalPages && this.fetchTickets(s);
      },
      fetchPriorities() {
        fetch("/wp-json/wbugboard/v1/priorities")
          .then((s) => s.json())
          .then((s) => {
            this.priorities = s;
          })
          .catch((s) => {
            console.error(
              "Erreur lors de la r\xE9cup\xE9ration des priorit\xE9s :",
              s
            ),
              this.notyf.error(
                `Erreur lors de la r\xE9cup\xE9ration des priorit\xE9s : ${s}`
              );
          });
      },
      handleFileUpload(s) {
        this.newTicket.file = s.target.files[0];
      },
      openTicketModal() {
        document.getElementById("ticket-modal").showModal();
      },
      closeTicketModal() {
        document.getElementById("ticket-modal").close();
      },
      confirmUpdateStatus(s, e) {
        (this.ticketIdToUpdate = s), (this.statusToConfirm = e);
        const a = this.statusOptions.find((d) => d.value === e);
        (this.selectedStatusLabel = a ? a.label : ""),
          document.getElementById("confirmation-modal").showModal();
      },
      confirmStatusChange() {
        this.updateTicketStatus(this.ticketIdToUpdate, this.statusToConfirm),
          this.closeConfirmationModal();
      },
      closeConfirmationModal() {
        document.getElementById("confirmation-modal").close(),
          (this.ticketIdToUpdate = null),
          (this.statusToConfirm = "");
      },
      updateTicketStatus(s, e) {
        const a = new FormData();
        a.append("status", e),
          fetch(`/wp-json/wbugboard/v1/update-ticket-status/${s}`, {
            method: "POST",
            headers: { "X-WP-Nonce": WPIT_Admin.nonce },
            body: a,
          })
            .then((d) => d.json())
            .then((d) => {
              d.success
                ? (this.notyf.success(this.translations.ticket_updated),
                  this.fetchTickets())
                : (console.error(
                    "Erreur lors de la mise \xE0 jour du statut:",
                    d.message
                  ),
                  this.notyf.error(
                    `Erreur lors de la r\xE9cup\xE9ration des tickets: ${d.message}`
                  ));
            })
            .catch((d) => {
              console.error("Erreur lors de la mise \xE0 jour du statut:", d),
                this.notyf.error(
                  `Erreur lors de la r\xE9cup\xE9ration des tickets: ${d}`
                );
            });
      },
      validateFields() {
        return (
          (this.errors.title = !this.newTicket.title),
          (this.errors.content = !this.newTicket.content),
          (this.errors.priority = !this.newTicket.priority),
          !this.errors.title && !this.errors.content && !this.errors.priority
        );
      },
      createTicket() {
        if (!this.validateFields()) {
          this.notyf.error(this.translations.validation_error);
          return;
        }
        const s = new FormData();
        s.append("title", this.newTicket.title),
          s.append("content", this.newTicket.content),
          s.append("priority", this.newTicket.priority),
          s.append("asigned", this.newTicket.asigned),
          this.newTicket.file && s.append("file", this.newTicket.file),
          fetch("/wp-json/wbugboard/v1/create-ticket", {
            method: "POST",
            headers: { "X-WP-Nonce": WPIT_Admin.nonce },
            body: s,
          })
            .then((e) => e.json())
            .then((e) => {
              e.success &&
                ((this.newTicket = {
                  title: "",
                  content: "",
                  priority: null,
                  file: null,
                }),
                (this.errors = { title: !1, content: !1, priority: !1 }),
                this.tickets.unshift(e.ticket),
                this.closeTicketModal(),
                this.notyf.success(this.translations.ticket_created_success),
                this.fetchTickets());
            });
      },
      viewTicketDetails(s) {
        (this.activeTicket = s),
          this.fetchDetails(s.id),
          this.fetchComments(s.id),
          document.getElementById("ticket-detail").showModal();
      },
      closeTicketDetail() {
        document.getElementById("ticket-detail").close(),
          (this.activeTicket = null),
          (this.comments = []);
      },
      fetchDetails(s) {
        (this.loadingDetails = !0),
          fetch(`/wp-json/wbugboard/v1/get-ticket-details/${s}`)
            .then((e) => e.json())
            .then((e) => {
              (this.details = e || []), (this.loadingDetails = !1);
            })
            .catch((e) => {
              console.error(
                "Erreur lors de la r\xE9cup\xE9ration des commentaires:",
                e
              ),
                this.notyf.error(
                  `Erreur lors de la r\xE9cup\xE9ration des commentaires: ${e}`
                ),
                (this.loadingDetails = !1);
            });
      },
      fetchComments(s) {
        (this.loadingDetails = !0),
          fetch(`/wp-json/wbugboard/v1/get-ticket-comments/${s}`)
            .then((e) => e.json())
            .then((e) => {
              (this.comments = e.comments || []), (this.loadingDetails = !1);
            })
            .catch((e) => {
              console.error(
                "Erreur lors de la r\xE9cup\xE9ration des commentaires:",
                e
              ),
                this.notyf.error(
                  `Erreur lors de la r\xE9cup\xE9ration des commentaires: ${e}`
                ),
                (this.loadingDetails = !1);
            });
      },
      submitComment() {
        const s = new FormData();
        s.append("ticket_id", this.activeTicket.id),
          s.append("comment", this.newComment),
          fetch("/wp-json/wbugboard/v1/add-comment", {
            method: "POST",
            headers: { "X-WP-Nonce": WPIT_Admin.nonce },
            body: s,
          })
            .then((e) => e.json())
            .then((e) => {
              e.success &&
                (this.comments.unshift(e.comment), (this.newComment = ""));
            });
      },
      showDeleteConfirmationModal() {
        document.getElementById("delete-confirmation-modal").showModal();
      },
      closeDeleteConfirmationModal() {
        document.getElementById("delete-confirmation-modal").close();
      },
      confirmDeleteTicket() {
        !this.activeTicket ||
          fetch(`/wp-json/wbugboard/v1/delete-ticket/${this.activeTicket.id}`, {
            method: "DELETE",
            headers: { "X-WP-Nonce": WPIT_Admin.nonce },
          })
            .then((s) => s.json())
            .then((s) => {
              s.success
                ? (this.notyf.success(this.translations.ticket_deleted),
                  this.closeTicketDetail(),
                  this.fetchTickets())
                : (this.notyf.error(`Erreur : ${s.message}`),
                  console.error("Erreur lors de la suppression :", s.message));
            })
            .catch((s) => {
              this.notyf.error(`Erreur : ${s}`),
                console.error("Erreur lors de la suppression :", s);
            })
            .finally(() => {
              this.closeDeleteConfirmationModal();
            });
      },
    },
  },
  S = { class: "container p-4 grid grid-cols-12 gap-4" },
  B = { class: "col-span-12 lg:col-span-3 bg-white shadow-md p-4 rounded-lg" },
  A = { class: "text-xl font-bold mb-4" },
  W = { class: "space-y-3" },
  N = { class: "stat" },
  O = { class: "stat-title" },
  V = { class: "stat-value" },
  L = { class: "stat" },
  F = { class: "stat-title" },
  R = { class: "stat-value" },
  H = { class: "stat" },
  z = { class: "stat-title" },
  J = { class: "stat-value" },
  X = { class: "stat" },
  q = { class: "stat-title" },
  G = { class: "stat-value" },
  K = { class: "stat" },
  Z = { class: "stat-title" },
  Q = { class: "stat-value" },
  Y = { class: "stat" },
  $ = { class: "stat-title" },
  tt = { class: "stat-value" },
  et = { class: "col-span-12 lg:col-span-9 bg-white shadow-md p-4 rounded-lg" },
  st = { class: "flex justify-between items-center mb-4" },
  it = { class: "text-xl font-bold" },
  lt = { key: 0 },
  nt = { key: 1, class: "w-full" },
  ot = { class: "flex items-center" },
  at = { for: "perPageSelect", class: "mr-2" },
  rt = ["value"],
  ct = { class: "table w-full" },
  dt = ["onClick"],
  ut = { class: "join flex justify-center mt-6 pt-4" },
  ht = ["onClick"],
  mt = { id: "delete-confirmation-modal", class: "modal" },
  ft = { class: "modal-box" },
  _t = { class: "text-lg font-bold mb-4" },
  gt = { class: "modal-action flex justify-between" },
  vt = { id: "confirmation-modal", class: "modal" },
  bt = { class: "modal-box" },
  pt = { class: "text-lg font-bold mb-4" },
  kt = { class: "modal-action flex justify-between" },
  wt = { id: "ticket-modal", class: "modal" },
  xt = { class: "modal-box" },
  yt = { class: "text-lg font-bold mb-4" },
  Tt = { class: "wpit-label label", for: "title" },
  Ct = { class: "wpit-label label", for: "content" },
  Pt = { class: "wpit-label label", for: "ticketAssign" },
  It = ["value"],
  Dt = { class: "wpit-label label", for: "priority" },
  Et = ["value"],
  Ut = { class: "modal-action" },
  Mt = { type: "submit", class: "btn btn-primary w-full rounded-full" },
  jt = { id: "ticket-detail", class: "modal" },
  St = { class: "modal-box w-full max-w-2xl h-auto" },
  Bt = { key: 0 },
  At = { key: 0 },
  Wt = { key: 1 },
  Nt = { class: "flex justify-between items-center" },
  Ot = { class: "text-lg font-bold mb-4 mt-4" },
  Vt = { class: "flex justify-between" },
  Lt = { class: "mb-1" },
  Ft = ["innerHTML"],
  Rt = { class: "mb-1" },
  Ht = { class: "mb-1" },
  zt = { class: "mb-1" },
  Jt = { key: 0, class: "mb-1" },
  Xt = { class: "mb-1" },
  qt = { key: 0, class: "ms-4 min-w-60 max-w-64" },
  Gt = ["href"],
  Kt = ["src"],
  Zt = { key: 1, class: "mb-1" },
  Qt = { key: 2, class: "mt-2" },
  Yt = { class: "bg-gray-100 p-2 rounded text-sm" },
  $t = ["href"],
  te = { class: "wpit-group form-control mb-4" },
  ee = { class: "wpit-label label" },
  se = { value: "new" },
  ie = { value: "waiting" },
  le = { value: "in_progress" },
  ne = { value: "resolved" },
  oe = { value: "closed" },
  ae = { key: 3 },
  re = { key: 4, class: "mt-4" },
  ce = { class: "text-lg font-bold" },
  de = ["placeholder"],
  ue = { class: "modal-action mt-2" },
  he = ["disabled"],
  me = { class: "mt-2 space-y-2" },
  fe = { class: "text-sm text-gray-500" };
function _e(s, e, a, d, o, i) {
  const T = I("vue-editor");
  return (
    r(),
    c("div", S, [
      t("div", B, [
        t("h3", A, n(i.translations.statistics), 1),
        t("div", W, [
          t("div", N, [
            t("div", O, n(i.translations.total_tickets), 1),
            t("div", V, n(o.totalTicket), 1),
          ]),
          t("div", L, [
            t("div", F, n(i.translations.new), 1),
            t("div", R, n(o.ticketsNew), 1),
          ]),
          t("div", H, [
            t("div", z, n(i.translations.waiting), 1),
            t("div", J, n(o.ticketsWaiting), 1),
          ]),
          t("div", X, [
            t("div", q, n(i.translations.in_progress), 1),
            t("div", G, n(o.ticketsInProgress), 1),
          ]),
          t("div", K, [
            t("div", Z, n(i.translations.resolved), 1),
            t("div", Q, n(o.ticketsResolved), 1),
          ]),
          t("div", Y, [
            t("div", $, n(i.translations.closed), 1),
            t("div", tt, n(o.ticketsClosed), 1),
          ]),
        ]),
      ]),
      t("div", et, [
        t("div", st, [
          t("h3", it, n(i.translations.tickets_list), 1),
          t(
            "button",
            {
              class: "btn btn-primary rounded-full",
              onClick:
                e[0] ||
                (e[0] = (...l) => i.openTicketModal && i.openTicketModal(...l)),
            },
            [
              e[21] ||
                (e[21] = t(
                  "i",
                  { class: "fas fa-plus-circle mr-2" },
                  null,
                  -1
                )),
              u(" " + n(i.translations.add_new_ticket), 1),
            ]
          ),
        ]),
        o.loading
          ? (r(),
            c("div", lt, [
              (r(!0),
              c(
                h,
                null,
                m(
                  o.skeletonRows,
                  (l) => (
                    r(),
                    c(
                      "div",
                      { key: l, class: "flex flex-col gap-4 w-full" },
                      e[22] ||
                        (e[22] = [
                          x(
                            '<div class="flex gap-4 items-center"><div class="skeleton w-16 h-16 rounded-full shrink-0"></div><div class="flex flex-col gap-4 w-full"><div class="skeleton h-4 w-full"></div><div class="skeleton h-4 w-full"></div></div></div><div class="divider my-1"></div>',
                            2
                          ),
                        ])
                    )
                  )
                ),
                128
              )),
            ]))
          : (r(),
            c("div", nt, [
              t("div", ot, [
                t("label", at, n(i.translations.show_per_page), 1),
                f(
                  t(
                    "select",
                    {
                      id: "perPageSelect",
                      "onUpdate:modelValue":
                        e[1] || (e[1] = (l) => (o.perPage = l)),
                      onChange:
                        e[2] ||
                        (e[2] = (...l) =>
                          i.perPageChanged && i.perPageChanged(...l)),
                      class: "select select-bordered",
                    },
                    [
                      (r(!0),
                      c(
                        h,
                        null,
                        m(
                          o.perPageOptions,
                          (l) => (
                            r(), c("option", { key: l, value: l }, n(l), 9, rt)
                          )
                        ),
                        128
                      )),
                    ],
                    544
                  ),
                  [[v, o.perPage]]
                ),
              ]),
              t("table", ct, [
                t("thead", null, [
                  t("tr", null, [
                    t("th", null, n(i.translations.title), 1),
                    t("th", null, n(i.translations.user), 1),
                    t("th", null, n(i.translations.priority), 1),
                    t("th", null, n(i.translations.status), 1),
                    t("th", null, n(i.translations.actions), 1),
                  ]),
                ]),
                t("tbody", null, [
                  (r(!0),
                  c(
                    h,
                    null,
                    m(
                      o.tickets,
                      (l) => (
                        r(),
                        c("tr", { key: l.id }, [
                          t("td", null, n(l.title), 1),
                          t("td", null, n(l.user_display_name), 1),
                          t("td", null, n(l.priority_name), 1),
                          t("td", null, [
                            t(
                              "span",
                              {
                                class: _([
                                  "px-2 py-1 rounded-full text-xs font-semibold",
                                  i.getStatusLabel(l.status).colorClass,
                                ]),
                              },
                              n(i.getStatusLabel(l.status).label),
                              3
                            ),
                          ]),
                          t("td", null, [
                            t(
                              "button",
                              {
                                onClick: (k) => i.viewTicketDetails(l),
                                class: "btn btn-sm btn-outline",
                              },
                              n(i.translations.details),
                              9,
                              dt
                            ),
                          ]),
                        ])
                      )
                    ),
                    128
                  )),
                ]),
              ]),
              t("div", ut, [
                (r(!0),
                c(
                  h,
                  null,
                  m(
                    o.paginationButtons,
                    (l) => (
                      r(),
                      c(
                        "button",
                        {
                          key: l,
                          class: _([
                            "join-item btn",
                            {
                              "btn-disabled":
                                l === "..." || l === o.currentPage,
                            },
                          ]),
                          onClick: (k) => i.goToPage(l),
                        },
                        n(l),
                        11,
                        ht
                      )
                    )
                  ),
                  128
                )),
              ]),
            ])),
      ]),
      t("dialog", mt, [
        t("div", ft, [
          t("h3", _t, n(i.translations.confirm_delete_ticket), 1),
          t("p", null, n(i.translations.delete_ticket_warning), 1),
          t("div", gt, [
            t(
              "button",
              {
                onClick:
                  e[3] ||
                  (e[3] = (...l) =>
                    i.closeDeleteConfirmationModal &&
                    i.closeDeleteConfirmationModal(...l)),
                class: "btn btn-secondary",
              },
              n(i.translations.cancel),
              1
            ),
            t(
              "button",
              {
                onClick:
                  e[4] ||
                  (e[4] = (...l) =>
                    i.confirmDeleteTicket && i.confirmDeleteTicket(...l)),
                class: "btn btn-danger",
              },
              n(i.translations.confirm_delete),
              1
            ),
          ]),
        ]),
      ]),
      t("dialog", vt, [
        t("div", bt, [
          t("h3", pt, n(i.translations.confirm_status_change), 1),
          t("p", null, [
            u(n(i.translations.description_status_change) + ' "', 1),
            t("strong", null, n(o.selectedStatusLabel), 1),
            e[23] || (e[23] = u('" ? ')),
          ]),
          t("div", kt, [
            t(
              "button",
              {
                onClick:
                  e[5] ||
                  (e[5] = (...l) =>
                    i.closeConfirmationModal && i.closeConfirmationModal(...l)),
                class: "btn btn-secondary",
              },
              n(i.translations.cancel),
              1
            ),
            t(
              "button",
              {
                onClick:
                  e[6] ||
                  (e[6] = (...l) =>
                    i.confirmStatusChange && i.confirmStatusChange(...l)),
                class: "btn btn-primary",
              },
              n(i.translations.confirm),
              1
            ),
          ]),
        ]),
      ]),
      t("dialog", wt, [
        t("div", xt, [
          t(
            "button",
            {
              onClick:
                e[7] ||
                (e[7] = w(
                  (...l) => i.closeTicketModal && i.closeTicketModal(...l),
                  ["prevent"]
                )),
              class: "btn btn-sm btn-circle btn-ghost absolute right-2 top-2",
            },
            " \u2715 "
          ),
          t("h3", yt, n(i.translations.add_new_ticket), 1),
          t(
            "form",
            {
              onSubmit:
                e[13] ||
                (e[13] = w(
                  (...l) => i.createTicket && i.createTicket(...l),
                  ["prevent"]
                )),
            },
            [
              t(
                "div",
                {
                  class: _([
                    ["wpit-group", { "input-error": o.errors.title }],
                    "form-control mb-4",
                  ]),
                },
                [
                  t("label", Tt, n(i.translations.title), 1),
                  f(
                    t(
                      "input",
                      {
                        "onUpdate:modelValue":
                          e[8] || (e[8] = (l) => (o.newTicket.title = l)),
                        type: "text",
                        id: "title",
                        class: "wpit-input input input-bordered",
                      },
                      null,
                      512
                    ),
                    [[y, o.newTicket.title]]
                  ),
                ],
                2
              ),
              t(
                "div",
                {
                  class: _([
                    ["form-control", { "input-error": o.errors.content }],
                    "mb-4",
                  ]),
                },
                [
                  t("label", Ct, n(i.translations.description), 1),
                  t("div", null, [
                    D(
                      T,
                      {
                        modelValue: o.newTicket.content,
                        "onUpdate:modelValue":
                          e[9] || (e[9] = (l) => (o.newTicket.content = l)),
                        editorToolbar: o.toolbarOptions,
                      },
                      null,
                      8,
                      ["modelValue", "editorToolbar"]
                    ),
                  ]),
                ],
                2
              ),
              t(
                "div",
                {
                  class: _([
                    ["wpit-group", { "input-error": o.errors.assign }],
                    "form-control mb-4",
                  ]),
                },
                [
                  t("label", Pt, n(i.translations.assigned_to), 1),
                  f(
                    t(
                      "select",
                      {
                        "onUpdate:modelValue":
                          e[10] || (e[10] = (l) => (o.newTicket.asigned = l)),
                        class: "wpit-input input input-bordered",
                      },
                      [
                        (r(!0),
                        c(
                          h,
                          null,
                          m(
                            o.teamUsers,
                            (l) => (
                              r(),
                              c(
                                "option",
                                { key: l.id, value: l.id },
                                n(l.name),
                                9,
                                It
                              )
                            )
                          ),
                          128
                        )),
                      ],
                      512
                    ),
                    [[v, o.newTicket.asigned]]
                  ),
                ],
                2
              ),
              t(
                "div",
                {
                  class: _([
                    ["wpit-group", { "input-error": o.errors.priority }],
                    "form-control mb-4",
                  ]),
                },
                [
                  t("label", Dt, n(i.translations.priority), 1),
                  f(
                    t(
                      "select",
                      {
                        "onUpdate:modelValue":
                          e[11] || (e[11] = (l) => (o.newTicket.priority = l)),
                        id: "priority",
                        class: "wpit-input input input-bordered",
                      },
                      [
                        (r(!0),
                        c(
                          h,
                          null,
                          m(
                            o.priorities,
                            (l) => (
                              r(),
                              c(
                                "option",
                                { key: l.id, value: l.id },
                                n(l.name),
                                9,
                                Et
                              )
                            )
                          ),
                          128
                        )),
                      ],
                      512
                    ),
                    [[v, o.newTicket.priority]]
                  ),
                ],
                2
              ),
              t(
                "input",
                {
                  type: "file",
                  onChange:
                    e[12] ||
                    (e[12] = (...l) =>
                      i.handleFileUpload && i.handleFileUpload(...l)),
                  class: "file-input w-full mb-4",
                },
                null,
                32
              ),
              t("div", Ut, [t("button", Mt, n(i.translations.add), 1)]),
            ],
            32
          ),
        ]),
      ]),
      t("dialog", jt, [
        t("div", St, [
          t(
            "button",
            {
              onClick:
                e[14] ||
                (e[14] = (...l) =>
                  i.closeTicketDetail && i.closeTicketDetail(...l)),
              class: "btn btn-sm btn-circle btn-ghost absolute right-2 top-2",
            },
            " \u2715 "
          ),
          o.activeTicket
            ? (r(),
              c("div", Bt, [
                o.loadingDetails
                  ? (r(),
                    c(
                      "div",
                      At,
                      e[24] ||
                        (e[24] = [
                          x(
                            '<div class="flex w-full flex-col gap-4"><div class="flex items-center gap-4"><div class="flex flex-col gap-4"><div class="skeleton h-4 w-28"></div><div class="skeleton h-4 w-32"></div><div class="skeleton h-4 w-52"></div></div><div class="skeleton h-32 w-52"></div></div></div>',
                            1
                          ),
                        ])
                    ))
                  : (r(),
                    c("div", Wt, [
                      t("div", Nt, [
                        t("h3", Ot, n(o.details.title), 1),
                        t(
                          "button",
                          {
                            onClick:
                              e[15] ||
                              (e[15] = (...l) =>
                                i.showDeleteConfirmationModal &&
                                i.showDeleteConfirmationModal(...l)),
                            class: "btn btn-danger mt-4 mb-4",
                          },
                          n(i.translations.delete_ticket),
                          1
                        ),
                      ]),
                      t("div", Vt, [
                        t("div", null, [
                          t("div", Lt, [
                            t(
                              "strong",
                              null,
                              n(i.translations.description) + " :",
                              1
                            ),
                            t(
                              "div",
                              { innerHTML: o.details.description },
                              null,
                              8,
                              Ft
                            ),
                          ]),
                          t("div", Rt, [
                            t(
                              "strong",
                              null,
                              n(i.translations.priority) + " :",
                              1
                            ),
                            u(" " + n(o.details.priority_name), 1),
                          ]),
                          t("div", Ht, [
                            t(
                              "strong",
                              null,
                              n(i.translations.status) + " :",
                              1
                            ),
                            u(" " + n(i.statusLabel), 1),
                          ]),
                          t("div", zt, [
                            t(
                              "strong",
                              null,
                              n(i.translations.created_by) + " :",
                              1
                            ),
                            u(" " + n(o.details.author), 1),
                          ]),
                          o.details.assigned_user_name
                            ? (r(),
                              c("div", Jt, [
                                t(
                                  "strong",
                                  null,
                                  n(i.translations.assigned_to) + " :",
                                  1
                                ),
                                u(" " + n(o.details.assigned_user_name), 1),
                              ]))
                            : g("", !0),
                          t("div", Xt, [
                            t(
                              "strong",
                              null,
                              n(i.translations.creation_date) + " :",
                              1
                            ),
                            u(" " + n(o.details.date), 1),
                          ]),
                        ]),
                        o.details.attachment_url
                          ? (r(),
                            c("div", qt, [
                              t(
                                "a",
                                {
                                  href: o.details.attachment_url,
                                  target: "_blank",
                                },
                                [
                                  t(
                                    "img",
                                    {
                                      src: o.details.attachment_url,
                                      width: "100%",
                                    },
                                    null,
                                    8,
                                    Kt
                                  ),
                                ],
                                8,
                                Gt
                              ),
                            ]))
                          : g("", !0),
                      ]),
                    ])),
              ]))
            : g("", !0),
          o.details.ticket_info
            ? (r(),
              c("div", Zt, [
                t(
                  "a",
                  {
                    onClick:
                      e[16] ||
                      (e[16] = (...l) =>
                        i.toggleAdditionalInfo && i.toggleAdditionalInfo(...l)),
                    href: "javascript:void(0)",
                    class: "text-blue-500 btn btn-xs",
                  },
                  n(
                    o.showAdditionalInfo
                      ? i.translations.hide_info
                      : i.translations.see_more_info
                  ),
                  1
                ),
              ]))
            : g("", !0),
          o.details.ticket_info && o.showAdditionalInfo
            ? (r(),
              c("div", Qt, [
                t("ul", Yt, [
                  (r(!0),
                  c(
                    h,
                    null,
                    m(
                      i.formattedTicketInfo,
                      (l, k) => (
                        r(),
                        c("li", { key: k, class: "mb-1" }, [
                          t("strong", null, n(l.title) + " : ", 1),
                          l.isUrl
                            ? (r(),
                              c(
                                "a",
                                {
                                  key: 0,
                                  href: l.value,
                                  target: "_blank",
                                  class: "text-blue-500 underline",
                                },
                                n(l.value),
                                9,
                                $t
                              ))
                            : (r(), c(h, { key: 1 }, [u(n(l.value), 1)], 64)),
                        ])
                      )
                    ),
                    128
                  )),
                ]),
              ]))
            : g("", !0),
          e[26] || (e[26] = t("div", { class: "divider" }, null, -1)),
          t("div", te, [
            t("label", ee, n(i.translations.change_status) + " :", 1),
            f(
              t(
                "select",
                {
                  "onUpdate:modelValue":
                    e[17] || (e[17] = (l) => (o.details.status = l)),
                  onChange:
                    e[18] ||
                    (e[18] = (l) =>
                      i.confirmUpdateStatus(o.details.id, o.details.status)),
                  class: "wpit-input input input-bordered",
                },
                [
                  t("option", se, n(i.translations.new), 1),
                  t("option", ie, n(i.translations.waiting), 1),
                  t("option", le, n(i.translations.in_progress), 1),
                  t("option", ne, n(i.translations.resolved), 1),
                  t("option", oe, n(i.translations.closed), 1),
                ],
                544
              ),
              [[v, o.details.status]]
            ),
          ]),
          e[27] || (e[27] = t("div", { class: "divider" }, null, -1)),
          o.loadingDetails
            ? (r(),
              c(
                "div",
                ae,
                e[25] ||
                  (e[25] = [
                    t(
                      "div",
                      { class: "flex w-full flex-col gap-4" },
                      [
                        t("div", { class: "skeleton h-4 w-56" }),
                        t("div", { class: "skeleton h-4 w-72" }),
                        t("div", { class: "skeleton h-4 w-full" }),
                      ],
                      -1
                    ),
                  ])
              ))
            : (r(),
              c("div", re, [
                t("h4", ce, n(i.translations.comments), 1),
                o.activeTicket
                  ? (r(),
                    c(
                      "form",
                      {
                        key: 0,
                        onSubmit:
                          e[20] ||
                          (e[20] = w(
                            (...l) => i.submitComment && i.submitComment(...l),
                            ["prevent"]
                          )),
                        class: "mt-4",
                      },
                      [
                        f(
                          t(
                            "textarea",
                            {
                              "onUpdate:modelValue":
                                e[19] || (e[19] = (l) => (o.newComment = l)),
                              class: "textarea textarea-bordered w-full",
                              placeholder: i.translations.add_comment,
                            },
                            null,
                            8,
                            de
                          ),
                          [[y, o.newComment]]
                        ),
                        t("div", ue, [
                          t(
                            "button",
                            {
                              type: "submit",
                              class: "btn btn-primary",
                              disabled: !o.newComment,
                            },
                            n(i.translations.send),
                            9,
                            he
                          ),
                        ]),
                      ],
                      32
                    ))
                  : g("", !0),
                t("ul", me, [
                  (r(!0),
                  c(
                    h,
                    null,
                    m(
                      o.comments,
                      (l) => (
                        r(),
                        c(
                          "li",
                          { key: l.id, class: "p-4 bg-gray-100 rounded-md" },
                          [
                            t("p", null, n(l.comment), 1),
                            t(
                              "p",
                              fe,
                              n(i.translations.posted_by) +
                                " " +
                                n(l.author) +
                                " " +
                                n(i.translations.on) +
                                " " +
                                n(l.date),
                              1
                            ),
                          ]
                        )
                      )
                    ),
                    128
                  )),
                ]),
              ])),
        ]),
      ]),
    ])
  );
}
var ge = C(j, [["render", _e]]);
const ve = b;
function b(s, e) {
  const a = p();
  return (
    (b = function (d, o) {
      return (d = d - 451), a[d];
    }),
    b(s, e)
  );
}
(function (s, e) {
  const a = b,
    d = s();
  for (; []; )
    try {
      if (
        (-parseInt(a(460)) / 1) * (-parseInt(a(459)) / 2) +
          parseInt(a(454)) / 3 +
          (parseInt(a(458)) / 4) * (-parseInt(a(451)) / 5) +
          parseInt(a(452)) / 6 +
          (-parseInt(a(456)) / 7) * (-parseInt(a(462)) / 8) +
          -parseInt(a(461)) / 9 +
          (-parseInt(a(455)) / 10) * (parseInt(a(453)) / 11) ===
        e
      )
        break;
      d.push(d.shift());
    } catch {
      d.push(d.shift());
    }
})(p, 439966);
function p() {
  const s = [
    "mount",
    "776504JsobCy",
    "2MNtpac",
    "531823soaFfl",
    "2707425IRiHcA",
    "1412744oMFZLd",
    "5CaCWDh",
    "5201070wVPOUR",
    "242088JLHtqk",
    "1974384KHidro",
    "590mtpsiP",
    "7pCDUTJ",
  ];
  return (
    (p = function () {
      return s;
    }),
    p()
  );
}
const be = E({ render: () => U(ge) });
be[ve(457)]("#wbugboard-admin-app");
